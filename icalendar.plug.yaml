name: icalendar
requiredPermissions:
  - fetch
functions:
  syncCalendars:
    path: ./icalendar.ts:syncCalendars
    command:
      name: "iCalendar: Sync"
      priority: -1
    events:
      - editor:init
  startWatcher:
    path: ./icalendar.ts:startWatcher
    events:
      - editor:init
  forceSync:
    path: ./icalendar.ts:forceSync
    command:
      name: "iCalendar: Force Sync"
      priority: -1
  clearCache:
    path: ./icalendar.ts:clearCache
    command:
      name: "iCalendar: Clear All Events"
      priority: -1
  showVersion:
    path: ./icalendar.ts:showVersion
    command:
      name: "iCalendar: Version"
      priority: -2
config:
  schema.config.properties.icalendar:
    type: object
    required:
      - sources
    properties:
      sources:
        type: array
        minItems: 1
        items:
          type: object
          required:
            - url
          properties:
            url:
              type: string
              description: "Calendar URL (http://, https://, or file://)"
            name:
              type: string
              description: "Display name for this calendar (optional)"
            username:
              type: string
              description: "Username for Basic authentication (optional, HTTP(S) only)"
            password:
              type: string
              description: "Password for Basic authentication (optional, HTTP(S) only)"
            watch:
              type: boolean
              description: "Enable automatic syncing for file:// URLs (optional, default: false)"
            watchInterval:
              type: number
              description: "Sync interval in seconds for watched sources (optional, default: 30)"
      cacheDuration:
        type: number
        description: "Interval between two calendar synchronizations (default: 21600 = 6 hours)"
